<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>jquery.customEventListener Test Suite</title>
	<link rel="Stylesheet" media="screen" href="qunit/qunit/qunit.css" />
	<script src="data/testinit.js"></script>
	<script src="./jquery.1.6.4.js"></script>
	<script src="../jquery.customEventListener.js"></script>
	<script type="text/javascript">
	$(function() {
		$.customEventListener("#hoge").add('myClick', function(obj) {
			return (obj.filter('*:active').length > 0);
		});
		$('#hoge').bind('myClick', function(){
			console.log('myClick fired');
		});
		$("#addDom").bind('click', function() {
			var additionalDiv = $('<div class="additionalDiv">additionalDiv</div>').css({display:'none'});
			$('#additionalContainer').append(additionalDiv);
			additionalDiv.fadeIn();
			return false;
		});
		$.customEventListener("#additionalContainer").add('gotElement', function(obj) {
			var a = obj.find('*');
			if (a.length > 0) {
				return (a.css('opacity') == 1);
			}
		});
		$("#additionalContainer").bind('gotElement', function() {
			console.log('gotElement');
		});
		$.customEventListener(document).add('additionalContainerLoaded', function(obj) {
			return $('#additionalContainer').length > 0;
		});
		$(document).bind('additionalContainerLoaded', function() {
			console.log('additionalContainerLoaded');
		});
		
		$.customEventListener("#textarea").addChangeListener('resize', function(obj){
			return obj.get(0).clientWidth + 'x' + obj.get(0).clientHeight;
		});
		$("#hoge").bind('click', function(){
			$("#textarea").css('width', '1000px');
		});
		$("#textarea").bind('resize', function() {
			console.log('resize');
		});
	});
	</script>
</head>
<body id="body">
	<h1 id="qunit-header">jquery.customEventListener Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="hoge">
		myClick
	</div>
	<a id="addDom" href="#add">
		Add Dom
	</a>
	<div id="additionalContainer">
		additionalContainer
	</div>
	<form>
		<div>
			<textarea id="textarea">test</textarea>
		</div>
	</form>
</body>
</html>